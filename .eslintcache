[{"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\index.js":"1","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\App\\App.js":"2","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Header\\Header.js":"3","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Main\\Main.js":"4","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\SavedNews\\SavedNews.js":"5","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\SavedNewsHeader\\SavedNewsHeader.js":"6","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\NewsCardList\\NewsCardList.js":"7","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\NewsCard\\NewsCard.js":"8","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\About\\About.js":"9","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Footer\\Footer.js":"10","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\PopupWithForm\\PopupWithForm.js":"11","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Navigation\\Navigation.js":"12","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\SearchForm\\SearchForm.js":"13","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Preloader\\Preloader.js":"14","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\formvalidator.js":"15","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\auth.js":"16","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\config\\config.js":"17","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\contexts\\CurrentUserContext.js":"18","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\contexts\\CurrentCardsContext.js":"19","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\NewsApi.js":"20","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\MainApi.js":"21","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\ProtectedRoute\\ProtectedRoute.js":"22"},{"size":337,"mtime":1613019353940,"results":"23","hashOfConfig":"24"},{"size":8746,"mtime":1613690153758,"results":"25","hashOfConfig":"24"},{"size":1486,"mtime":1613535740010,"results":"26","hashOfConfig":"24"},{"size":1148,"mtime":1613625146417,"results":"27","hashOfConfig":"24"},{"size":453,"mtime":1613532450022,"results":"28","hashOfConfig":"24"},{"size":1173,"mtime":1613531139882,"results":"29","hashOfConfig":"24"},{"size":1790,"mtime":1613689543322,"results":"30","hashOfConfig":"24"},{"size":1717,"mtime":1613690585834,"results":"31","hashOfConfig":"24"},{"size":795,"mtime":1613690130279,"results":"32","hashOfConfig":"24"},{"size":1158,"mtime":1613690515501,"results":"33","hashOfConfig":"24"},{"size":6627,"mtime":1613690420997,"results":"34","hashOfConfig":"24"},{"size":1012,"mtime":1613019353817,"results":"35","hashOfConfig":"24"},{"size":1203,"mtime":1613448237657,"results":"36","hashOfConfig":"24"},{"size":678,"mtime":1613019353828,"results":"37","hashOfConfig":"24"},{"size":486,"mtime":1613019353942,"results":"38","hashOfConfig":"24"},{"size":1370,"mtime":1613276308830,"results":"39","hashOfConfig":"24"},{"size":194,"mtime":1613455072631,"results":"40","hashOfConfig":"24"},{"size":86,"mtime":1613022058971,"results":"41","hashOfConfig":"24"},{"size":87,"mtime":1613104525924,"results":"42","hashOfConfig":"24"},{"size":1016,"mtime":1613365036232,"results":"43","hashOfConfig":"24"},{"size":1990,"mtime":1613375150769,"results":"44","hashOfConfig":"24"},{"size":335,"mtime":1613525506660,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"192a8lm",{"filePath":"49","messages":"50","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"48"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\index.js",[],["92","93"],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\App\\App.js",["94","95"],"import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\n//util\r\nimport {formValidator} from '../../utils/formvalidator';\r\nimport { mainApi } from '../../utils/MainApi';\r\nimport { newsApi } from '../../utils/NewsApi';\r\nimport { auth }  from '../../utils/auth';\r\n\r\n//components\r\nimport Header from '../Header/Header';\r\nimport Main from '../Main/Main';\r\nimport SavedNews from '../SavedNews/SavedNews';\r\nimport About from '../About/About';\r\nimport Footer from '../Footer/Footer';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport PopupWithForm from '../PopupWithForm/PopupWithForm';\r\n\r\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute'\r\n\r\n//context\r\nimport {CurrentUserContext} from '../../contexts/CurrentUserContext';\r\nimport {CurrentCardsContext} from '../../contexts/CurrentCardsContext';\r\n\r\nexport default function App() {\r\n\r\n  const [isSignInOpen, setIsSignInOpen] = React.useState(false);\r\n  const [isSignUpOpen, setIsSignUpOpen] = React.useState(false);\r\n  const [isSuccessOpen, setIsSuccessOpen] = React.useState(false);\r\n  const [isSignedIn, setisSignedIn] = React.useState(false);\r\n  const [isNavOpen, setisNavOpen] = React.useState(false);\r\n\r\n  const [currentUser, setcurrentUser] = React.useState({});\r\n  const [savedCards, setsavedCards] = React.useState([]);\r\n  const [searchCards, setsearchCards] = React.useState([]);\r\n\r\n  //loading\r\n  const [loadingResults, setloadingResults] = React.useState(false);\r\n  const [loadingUser, setloadingUser] = React.useState(false);\r\n\r\n\r\n  function closeAllPopups(){\r\n    setIsSignInOpen(false);\r\n    setIsSignUpOpen(false);\r\n    setIsSuccessOpen(false);\r\n    setisNavOpen(false);\r\n  }\r\n\r\n  function handleOpenSignIn(){\r\n    closeAllPopups();\r\n    setIsSignInOpen(true);\r\n  }\r\n\r\n  function handleOpenSignUp(){\r\n    closeAllPopups();\r\n    setIsSignUpOpen(true);\r\n  }\r\n\r\n  function handleSignUp(username, email, password){\r\n    auth.register(username, email, password)\r\n    .then((res) => {\r\n      if(res){\r\n        //registration succeeded\r\n        handleSignIn(email, password);\r\n        console.log(res);\r\n      }\r\n      else{\r\n        //registration failed\r\n        console.log(\"registration failed\");\r\n      }\r\n    })\r\n    closeAllPopups();\r\n    handleOpenSuccess();\r\n  }\r\n\r\n  function handleSignIn(email, password){\r\n    setloadingUser(true);\r\n    auth.login(email, password)\r\n    .then((res) => {\r\n      if(res){\r\n        getUser();\r\n      }\r\n      else{\r\n        console.log(\"login failed\");\r\n      }\r\n    })\r\n    .finally(()=>{    \r\n      setloadingUser(false);\r\n      closeAllPopups();\r\n    })  \r\n  }\r\n\r\n  function handleSignOut(){\r\n    setcurrentUser({});\r\n    localStorage.clear();\r\n    setsearchCards([]);\r\n    setisSignedIn(false);\r\n  }\r\n\r\n  function handleOpenSuccess(){\r\n    closeAllPopups();\r\n    setIsSuccessOpen(true);\r\n  }\r\n\r\n  function handleNav(){\r\n    setisNavOpen(!isNavOpen);\r\n  }\r\n\r\n  function handleSearch(keyword) {\r\n    //set loading\r\n    setloadingResults(true);\r\n    //get cards\r\n    newsApi.getResults(keyword)        \r\n    .then((data)=>{\r\n      //reset cards\r\n      setsearchCards([]);\r\n      localStorage.removeItem('cards');\r\n      //format cards and set cards\r\n      const formattedCards = formatResults(data.articles, keyword);\r\n      setsearchCards(formattedCards);\r\n      localStorage.setItem('cards', searchCards);\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);\r\n    })\r\n    .finally(()=>{\r\n      //set loading\r\n      setloadingResults(false);\r\n    })\r\n  }\r\n\r\n  function formatResults(results, keyword){\r\n    const defaultImage ='https://images.unsplash.com/photo-1585829365295-ab7cd400c167';\r\n    return results.map(result => ({ \r\n      keyword : keyword,\r\n      image : !result.urlToImage ? defaultImage:result.urlToImage,\r\n      link : result.url,\r\n      date : result.publishedAt,\r\n      title : result.title,\r\n      text : result.description,\r\n      source : result.source.name\r\n    }));\r\n  }\r\n\r\n  function handleSaveCard(card) {\r\n    //check if card already on list\r\n    if(!savedCards.some((item) => item.link === card.link))\r\n    {\r\n      mainApi.addCard(card)\r\n      .then((data)=>{\r\n        console.log(\"card added!\");\r\n        getSavedCards();\r\n      })\r\n      .catch((err) => { \r\n        console.log(err);\r\n      })\r\n    }\r\n    else{\r\n      const savedCard = savedCards.find((item)=> item.link === card.link);\r\n      handleDeleteCard(savedCard);\r\n    };\r\n  }\r\n\r\n  function handleDeleteCard(card) {\r\n    mainApi.deleteCard(card._id)\r\n    .then((data)=>{\r\n      console.log(\"card deleted!\");\r\n      getSavedCards();\r\n    })\r\n    .catch((err) => { \r\n      console.log(err);\r\n    })\r\n  }\r\n\r\n  function getUser(){\r\n    if (localStorage.getItem('token')) {\r\n      const token = localStorage.getItem('token');\r\n      mainApi.setToken(token);\r\n\r\n      //load user\r\n      setloadingUser(true);\r\n      auth.authorize()\r\n      .then((data)=>{\r\n        setisSignedIn(true);\r\n        setcurrentUser(data);\r\n        localStorage.setItem('user', currentUser);\r\n      })\r\n      .catch((err) => { \r\n        setisSignedIn(false);\r\n        console.log(err);\r\n      })\r\n      .finally(()=>{\r\n        setloadingUser(false);\r\n      })\r\n    }\r\n  }\r\n\r\n  function getSavedCards(){\r\n    if(localStorage.getItem('token')) {\r\n      const token = localStorage.getItem('token');\r\n      mainApi.setToken(token);\r\n      //load cards\r\n      mainApi.getCards()\r\n      .then((data) => { \r\n        setsavedCards(data);\r\n      })\r\n      .catch((err) => { \r\n        console.log(err);\r\n      })\r\n    }\r\n    console.log(savedCards);\r\n  }\r\n\r\n    //get user from localStorage\r\n    React.useEffect(()=>{   \r\n      if(localStorage.getItem('token')) {   \r\n        getUser();\r\n      }\r\n    },[])\r\n\r\n    //get saved cards from localStorage\r\n    React.useEffect(()=>{   \r\n      if(localStorage.getItem('user')) {   \r\n        getSavedCards();\r\n      }\r\n    },[currentUser])\r\n\r\n    //reset cards when window is closed\r\n    React.useEffect(()=>{      \r\n      setsearchCards([]);\r\n      localStorage.removeItem('cards');\r\n    },[])\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n    <PopupWithForm \r\n      isOpen={isSignInOpen} \r\n      onOpen={handleOpenSignUp}\r\n      onClose={closeAllPopups} \r\n      onSignIn={handleSignIn} \r\n      fieldValidator={formValidator.fieldValidator}\r\n      formValidator={formValidator.formValidator}\r\n\r\n      type={'signIn'}\r\n    />\r\n\r\n    <PopupWithForm \r\n      isOpen={isSignUpOpen} \r\n      onOpen={handleOpenSignIn}\r\n      onClose={closeAllPopups} \r\n      onSignUp={handleSignUp} \r\n      fieldValidator={formValidator.fieldValidator}\r\n      formValidator={formValidator.formValidator}\r\n      type={'signUp'}\r\n      isLoading={loadingUser}\r\n    />  \r\n\r\n    <PopupWithForm \r\n      isOpen={isSuccessOpen} \r\n      onOpen={handleOpenSignIn}\r\n      onClose={closeAllPopups} \r\n      type={'success'}\r\n    /> \r\n\r\n    <div className=\"App\">\r\n        <Switch>\r\n          <Route exact path=\"/\">\r\n          <div className=\"App__main-bg\">\r\n            <Header \r\n            onSignin={handleSignIn} \r\n            onOpen={handleOpenSignIn} \r\n            onSignOut={handleSignOut} \r\n            signedIn={isSignedIn} \r\n            onOpenNav={handleNav}\r\n            currentUser={currentUser}\r\n            loading={loadingUser}\r\n            />\r\n            <Navigation signedIn={isSignedIn} onOpen={handleOpenSignIn} isOpen={isNavOpen} onOpenNav={handleNav} onSignIn={handleSignIn}/>\r\n            <Main \r\n              isSignedIn={isSignedIn}\r\n              onSearch={handleSearch} \r\n              onSaveCard={handleSaveCard}\r\n              cards={searchCards}\r\n              fieldValidator={formValidator.fieldValidator}\r\n              formValidator={formValidator.formValidator}\r\n              loading={loadingResults}\r\n            />\r\n          </div>\r\n          </Route>\r\n\r\n          <ProtectedRoute exact path=\"/saved-news\" \r\n            children={\r\n            <div className=\"App__saved-news\">\r\n              <Header\r\n              onSignin={handleSignIn} \r\n              onOpen={handleOpenSignIn} \r\n              onSignOut={handleSignOut} \r\n              signedIn={isSignedIn} \r\n              onOpenNav={handleNav}\r\n              currentUser={currentUser}\r\n              loading={loadingUser}\r\n              />\r\n              <Navigation signedIn={isSignedIn} onOpen={handleOpenSignIn} isOpen={isNavOpen} onOpenNav={handleNav} onSignIn={handleSignIn}/>\r\n              <CurrentCardsContext.Provider value={savedCards}>\r\n                <SavedNews isSignedIn={isSignedIn} onDeleteCard={handleDeleteCard}/>\r\n              </CurrentCardsContext.Provider>\r\n            </div>}\r\n          />\r\n\r\n        </Switch>\r\n      <About/>\r\n      <Footer/>\r\n    </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}","C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Header\\Header.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Main\\Main.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\SavedNews\\SavedNews.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\SavedNewsHeader\\SavedNewsHeader.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\NewsCardList\\NewsCardList.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\NewsCard\\NewsCard.js",["96"],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\About\\About.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Footer\\Footer.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\PopupWithForm\\PopupWithForm.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Navigation\\Navigation.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\SearchForm\\SearchForm.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\Preloader\\Preloader.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\formvalidator.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\auth.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\config\\config.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\contexts\\CurrentUserContext.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\contexts\\CurrentCardsContext.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\NewsApi.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\utils\\MainApi.js",[],"C:\\Users\\ZEE\\Yandex\\final project\\news-explorer-frontend\\src\\components\\ProtectedRoute\\ProtectedRoute.js",[],{"ruleId":"97","replacedBy":"98"},{"ruleId":"99","replacedBy":"100"},{"ruleId":"101","severity":1,"message":"102","line":219,"column":7,"nodeType":"103","endLine":219,"endColumn":9,"suggestions":"104"},{"ruleId":"101","severity":1,"message":"105","line":226,"column":7,"nodeType":"103","endLine":226,"endColumn":20,"suggestions":"106"},{"ruleId":"107","severity":1,"message":"108","line":6,"column":20,"nodeType":"109","messageId":"110","endLine":6,"endColumn":33},"no-native-reassign",["111"],"no-negated-in-lhs",["112"],"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'getUser'. Either include it or remove the dependency array.","ArrayExpression",["113"],"React Hook React.useEffect has a missing dependency: 'getSavedCards'. Either include it or remove the dependency array.",["114"],"no-unused-vars","'setBookmarked' is assigned a value but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"115","fix":"116"},{"desc":"117","fix":"118"},"Update the dependencies array to be: [getUser]",{"range":"119","text":"120"},"Update the dependencies array to be: [currentUser, getSavedCards]",{"range":"121","text":"122"},[5701,5703],"[getUser]",[5865,5878],"[currentUser, getSavedCards]"]