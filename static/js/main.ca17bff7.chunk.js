(this["webpackJsonpnews-explorer"]=this["webpackJsonpnews-explorer"]||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),c=n.n(s),o=n(19),i=n.n(o),r=n(5),l=n(2),d=n(3),u=n(11),p=n(12),j=new(function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,[{key:"formValidator",value:function(e,t){return!!Array.from(e.querySelectorAll(t)).some((function(e){return!e.validity.valid}))}},{key:"fieldValidator",value:function(e,t){e.validity.valid?t(""):t(e.validationMessage)}}]),e}()),h=n(9),m=new(function(){function e(t){var n=t.BASE_URL;Object(u.a)(this,e),this.BASE_URL=n}return Object(p.a)(e,[{key:"setToken",value:function(e){this.token="Bearer ".concat(e)}},{key:"register",value:function(e,t,n){return fetch("".concat(h.baseURL,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}},{key:"login",value:function(e,t){var n=this;return fetch("".concat(h.baseURL,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(e.token)return n.setToken(e.token),localStorage.setItem("token",e.token),e}))}},{key:"authorize",value:function(){return fetch("".concat(h.baseURL,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",authorization:this.token}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}},{key:"getCards",value:function(){return fetch("".concat(this.BASE_URL,"/articles"),{headers:{"Content-Type":"application/json",authorization:this.token}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}},{key:"addCard",value:function(e){return fetch("".concat(this.BASE_URL,"/articles"),{method:"POST",headers:{"Content-Type":"application/json",authorization:this.token},body:JSON.stringify({keyword:e.keyword,link:e.link,image:e.image,date:e.date,title:e.title,text:e.text,source:e.source})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.BASE_URL,"/articles/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:this.token}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}}]),e}())({BASE_URL:h.baseURL}),b=new(function(){function e(t){var n=t.baseURL,a=t.APIkey;Object(u.a)(this,e),this.baseURL=n,this.APIkey=a}return Object(p.a)(e,[{key:"getResults",value:function(e){return fetch("".concat(this.baseURL+this.APIkey,"&q=").concat(e,"&from=").concat(Date.now(),"&to=").concat(Date.now()+7,"&pageSize=100"),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}},{key:"getAllResults",value:function(){return fetch("".concat(this.baseURL+this.APIkey,"&from=").concat(Date.now(),"&to=").concat(Date.now()+7,"&pageSize=100"),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.statusText))}))}}]),e}())({baseURL:h.proxyURL,APIkey:h.APIkey}),O=c.a.createContext();function g(e){var t=c.a.useContext(O);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("nav",{className:"header",children:[Object(a.jsx)(r.b,{className:"header__title-link",to:"/",children:Object(a.jsx)("h1",{className:"header__title",children:"NewsExplorer"})}),Object(a.jsxs)("ul",{className:"header__links",children:[Object(a.jsx)("li",{className:"header__item",children:Object(a.jsx)(r.b,{className:"header__link",exact:!0,to:"/",activeClassName:"header__link_selected",children:"Home"})}),Object(a.jsx)("li",{className:"header__item ".concat(!e.signedIn&&"header__link_hidden"),children:Object(a.jsx)(r.b,{className:"header__link",exact:!0,to:"/saved-news",activeClassName:"header__link_selected",children:"Saved Articles"})}),Object(a.jsx)("li",{className:"header__item header__link_button ".concat(e.signedIn&&"header__link_hidden"),children:Object(a.jsx)("button",{className:"header__button",type:"button",onClick:e.onOpen,children:e.loading?"Loading...":"Sign In"})}),Object(a.jsx)("li",{className:"header__item header__link_button ".concat(!e.signedIn&&"header__link_hidden"),children:Object(a.jsxs)("div",{className:"header__button",children:[e.loading?"Loading...":t.name,Object(a.jsx)("button",{className:"header__button-icon",onClick:e.onSignOut})]})})]}),Object(a.jsx)("button",{className:"header__collapse-button",onClick:e.onOpenNav})]})})}function f(e){var t=c.a.useState(""),n=Object(l.a)(t,2),s=n[0],o=n[1],i=c.a.useState(""),r=Object(l.a)(i,2),d=r[0],u=r[1],p=c.a.useState(!0),j=Object(l.a)(p,2),h=j[0],m=j[1];var b=c.a.useRef();return Object(a.jsxs)("form",{className:"search-form",ref:b,onChange:function(){e.formValidator(b.current,".search-field")?m(!0):m(!1)},onSubmit:function(t){t.preventDefault(),h||e.onSearch(s)},children:[Object(a.jsx)("input",{className:"search-field",type:"text",name:"search-field",placeholder:"Nature",minLength:"1",value:s,onChange:function(t){o(t.target.value),e.fieldValidator(t.target,u)}}),Object(a.jsx)("span",{className:"search-error",id:"search-error",children:d}),Object(a.jsx)("button",{className:"search-button",type:"submit",children:"Search"})]})}function _(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"newsCard__image",style:{backgroundImage:'url("'.concat(e.card.image,'")')},children:[Object(a.jsx)("button",{className:"newsCard__keyword",children:e.card.keyword}),Object(a.jsx)("button",{className:"newsCard__button ".concat(e.bookmarked&&"newsCard__button_marked"),onClick:function(){e.isSignedIn&&e.onSaveCard?e.onSaveCard(e.card):e.isSignedIn&&e.onDeleteCard?e.onDeleteCard(e.card):e.isSignedIn||e.onOpenSignin&&e.onOpenSignin()}}),Object(a.jsx)("button",{className:"newsCard__button-hover ".concat(e.isSignedIn&&"newsCard__button-hover_signedIn"),children:"".concat(e.isSignedIn?"Remove from saved":"Sign in to save articles")})]}),Object(a.jsxs)("div",{onClick:function(){window.location.href="".concat(e.card.link)},children:[Object(a.jsx)("h4",{className:"newsCard__date",children:function(e){var t=new Date(e);return new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(t)}(e.card.date)}),Object(a.jsx)("h3",{className:"newsCard__title",children:e.card.title}),Object(a.jsx)("p",{className:"newsCard__description",children:e.card.text}),Object(a.jsx)("p",{className:"newsCard__source",children:e.card.name})]})]})}function x(e){return Object(a.jsxs)("section",{className:"preloader",children:[e.loading?Object(a.jsx)("img",{className:"preloader__image",src:"data:image/png;base64,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",alt:"loading..."}):Object(a.jsx)("img",{src:"data:image/png;base64,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",alt:"nothing found"}),!e.loading&&Object(a.jsx)("h2",{className:"preloader__title",children:"Nothing found"}),e.loading?Object(a.jsx)("p",{className:"preloader__text",children:"Searching for news..."}):Object(a.jsx)("p",{className:"preloader__text",children:"Sorry, but nothing matched your search terms."})]})}var A=c.a.createContext();function S(e){var t=c.a.useContext(A),n=e.searchCards?e.searchCards:t||[],s=c.a.useState(3),o=Object(l.a)(s,2),i=o[0],r=o[1],d=c.a.useState(!0),u=Object(l.a)(d,2),p=u[0],j=u[1];return c.a.useEffect((function(){0===n.length||i===n.length?j(!1):n.length>3&&i<n.length&&j(!0)}),[n,i]),Object(a.jsxs)("div",{className:"newsCardList",children:[Object(a.jsx)("h3",{className:"newsCardList__title",children:"Search results"}),Object(a.jsx)("div",{className:"newsCardList__container",children:Array.isArray(n)&&n.length>0?n.slice(0,i).map((function(n){return Object(a.jsx)("div",{className:"newsCard",children:Object(a.jsx)(_,{card:n,bookmarked:e.isSignedIn&&t.some((function(e){return e.link===n.link})),isSignedIn:e.isSignedIn,onSaveCard:e.onSaveCard,onOpenSignin:e.onOpenSignin,onDeleteCard:e.onDeleteCard})},n._id)})):Object(a.jsx)(x,{loading:e.loading})}),p&&Object(a.jsx)("button",{className:"newsCardList__show-more",onClick:function(){i+3<n.length?r(i+3):i<n.length&&r(n.length)},children:"Show More"})]})}function N(e){var t=c.a.useState(!1),n=Object(l.a)(t,2),s=n[0],o=n[1];return c.a.useEffect((function(){e.searchCards&&e.searchCards.length>0&&o(!0)}),[e.searchCards]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{className:"main",children:[Object(a.jsx)("h2",{className:"main__title",children:"What's going on in the world?"}),Object(a.jsx)("h3",{className:"main__subtitle",children:"Find the latest news on any topic and save them in your personal account."}),Object(a.jsx)(f,{onSearch:function(t){e.onSearch(t),o(!0)},formValidator:e.formValidator,fieldValidator:e.fieldValidator})]}),s&&Object(a.jsx)(S,{isSignedIn:e.isSignedIn,searchCards:e.searchCards,onSaveCard:e.onSaveCard,onOpenSignin:e.onOpenSignin,loading:e.loading})]})}function v(e){var t=c.a.useContext(O),n=c.a.useContext(A),s=function(e){return e.sort((function(t,n){return e.filter((function(e){return e===t})).length-e.filter((function(e){return e===n})).length})).filter((function(e,t,n){return n.indexOf(e)===t})).reverse()}(n.map((function(e){return e.keyword})));return Object(a.jsxs)("section",{className:"SavedNewsHeader",children:[Object(a.jsx)("p",{className:"SavedNewsHeader__caption",children:"Saved articles"}),Object(a.jsxs)("h2",{className:"SavedNewsHeader__title",children:[t.name?"".concat(t.name,", you"):"You"," have ",n.length," saved articles"]}),Object(a.jsxs)("h3",{className:"SavedNewsHeader__keywords-title",children:[s.length>0&&"By Keywords: ",Object(a.jsxs)("span",{className:"SavedNewsHeader__keywords-list",children:[s[0]&&"".concat(s[0]),s[1]&&", ".concat(s[1]),s.length>3?" and ".concat(s.length-2," others"):s[2]&&", ".concat(s[2])]})]})]})}function k(e){return Object(a.jsxs)("div",{className:"savedNews",children:[Object(a.jsx)(v,{}),Object(a.jsx)("h2",{className:"savedNews__title",children:"Search Results"}),Object(a.jsx)(S,{isSignedIn:e.isSignedIn,onDeleteCard:e.onDeleteCard})]})}var C=n.p+"static/media/about_img.9bf117c9.png";function w(){return Object(a.jsxs)("section",{className:"about",children:[Object(a.jsx)("div",{className:"about__img-container",children:Object(a.jsx)("img",{className:"about__img",src:C,alt:"avatar"})}),Object(a.jsxs)("div",{className:"about__text",children:[Object(a.jsx)("h2",{className:"about__title",children:"About the author"}),Object(a.jsx)("p",{className:"about__description",children:"This block describes the project author. Here you should indicate your name, what you do, and which development technologies you know. You can also talk about your experience with Practicum, what you learned there, and how you can help potential customers."})]})]})}function y(){return Object(a.jsxs)("section",{className:"footer",children:[Object(a.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Supersite, Powered by News API"}),Object(a.jsxs)("div",{className:"footer__links",children:[Object(a.jsxs)("ul",{className:"footer__nav",children:[Object(a.jsx)("li",{className:"footer__nav-item",children:Object(a.jsx)(r.b,{to:"/",className:"footer__nav-link",children:"Home"})}),Object(a.jsx)("li",{className:"footer__nav-item",children:Object(a.jsx)("a",{href:"https://practicum.yandex.com/",target:"_blank",rel:"noreferrer",className:"footer__nav-link",children:"Practicum by Yandex"})})]}),Object(a.jsxs)("ul",{className:"footer__social",children:[Object(a.jsx)("li",{className:"footer__social-item",children:Object(a.jsx)("a",{href:"https://github.com/ze-e/news-explorer-frontend",target:"_blank",rel:"noreferrer",children:Object(a.jsx)("div",{className:"footer__social-button footer__social-button_github"})})}),Object(a.jsx)("li",{className:"footer__social-item",children:Object(a.jsx)("a",{href:"https://www.facebook.com/",target:"_blank",rel:"noreferrer",children:Object(a.jsx)("div",{className:"footer__social-button footer__social-button_facebook"})})})]})]})]})}function I(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("section",{className:"nav ".concat(e.isOpen&&"nav_open"),children:Object(a.jsxs)("nav",{className:"nav__container",children:[Object(a.jsxs)("div",{className:"nav__top",children:[Object(a.jsx)(r.b,{className:"nav__title-link",to:"/",children:Object(a.jsx)("h1",{className:"nav__title",children:"NewsExplorer"})}),Object(a.jsx)("button",{className:"nav__button-icon",onClick:e.onOpenNav})]}),Object(a.jsxs)("ul",{className:"nav__links",children:[Object(a.jsx)("li",{className:"nav__item nav__link_selected",children:Object(a.jsx)(r.b,{className:"nav__link",to:"/",children:"Home"})}),Object(a.jsx)("li",{className:"nav__item nav__link_selected ".concat(!e.signedIn&&"nav__item_signedOut"),children:Object(a.jsx)(r.b,{className:"nav__link",to:"/saved-news",children:"Saved Article"})}),Object(a.jsx)("li",{className:"nav__item nav__link_button",children:Object(a.jsx)("button",{className:"nav__button",onClick:e.onOpen,children:"Sign in"})})]})]})})})}function L(e){var t=c.a.useState(""),n=Object(l.a)(t,2),s=n[0],o=n[1],i=c.a.useState(""),r=Object(l.a)(i,2),d=r[0],u=r[1],p=c.a.useState(""),j=Object(l.a)(p,2),h=j[0],m=j[1],b=c.a.useState(""),O=Object(l.a)(b,2),g=O[0],f=O[1],_=c.a.useState(""),x=Object(l.a)(_,2),A=x[0],S=x[1],N=c.a.useState(""),v=Object(l.a)(N,2),k=v[0],C=v[1],w=c.a.useState(!0),y=Object(l.a)(w,2),I=y[0],L=y[1],R=c.a.useState(!0),E=Object(l.a)(R,2),V=E[0],H=E[1];function T(t){o(t.target.value),e.fieldValidator(t.target,f)}function B(t){u(t.target.value),e.fieldValidator(t.target,C)}c.a.useEffect((function(){L(!0),H(!0),o(""),u(""),m("")}),[e.isOpen]);var U=c.a.useRef(),F=c.a.useRef();var D=Object(a.jsx)("div",{className:"popup__container",children:Object(a.jsxs)("form",{className:"popup__form",onChange:function(){e.formValidator(U.current,".popup__input")?L(!0):L(!1)},onSubmit:function(t){t.preventDefault(),I||e.onSignIn(s,d)},ref:U,children:[Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose}),Object(a.jsx)("h4",{className:"popup__title",children:"Sign in"}),Object(a.jsx)("p",{className:"popup__input-label",children:"Email"}),Object(a.jsx)("input",{className:"popup__input",id:"email-input",type:"text",name:"email",required:!0,minLength:"2",maxLength:"40",placeholder:"Enter email",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",value:s,onChange:T}),Object(a.jsx)("span",{className:'popup__input-error" '.concat(""!==g&&"popup__error_visible"),id:"email-input-error",children:g}),Object(a.jsx)("p",{className:"popup__input-label",children:"Password"}),Object(a.jsx)("input",{className:"popup__input",id:"password-input",type:"password",name:"password",required:!0,minLength:"2",maxLength:"12",placeholder:"Enter password",value:d,onChange:B}),Object(a.jsx)("span",{className:'popup__input-error" '.concat(""!==k&&"popup__error_visible"),id:"password-input-error",children:k}),Object(a.jsx)("button",{className:"popup__submit ".concat((e.loading||I)&&"popup__submit_disabled"),disabled:e.loading||I,type:"submit",children:e.isLoading?"Loading...":"Sign in"}),Object(a.jsxs)("p",{className:"popup__link-text",children:["or ",Object(a.jsx)("button",{className:"popup__link",type:"button",onClick:e.onOpen,children:"Sign up"})]})]})}),Y=Object(a.jsx)("div",{className:"popup__container",children:Object(a.jsxs)("form",{className:"popup__form",onChange:function(){e.formValidator(F.current,".popup__input")?H(!0):H(!1)},onSubmit:function(t){t.preventDefault(),V||e.onSignUp(h,s,d)},ref:F,children:[Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose}),Object(a.jsx)("h4",{className:"popup__title",children:"Sign up"}),Object(a.jsx)("p",{className:"popup__input-label",children:"Email"}),Object(a.jsx)("input",{className:"popup__input",type:"text",name:"email",required:!0,minLength:"2",maxLength:"40",pattern:"[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}",value:s,onChange:T,placeholder:"Enter email"}),Object(a.jsx)("span",{className:"popup__input-error ".concat(""!==g&&"popup__error_visible"),id:"email-input-error",children:g}),Object(a.jsx)("p",{className:"popup__input-label",children:"Password"}),Object(a.jsx)("input",{className:"popup__input",type:"password",name:"password",required:!0,minLength:"7",maxLength:"12",pattern:"[\\w\\d\\S]{7,12}",value:d,onChange:B,placeholder:"Enter password"}),Object(a.jsx)("span",{className:"popup__input-error ".concat(""!==k&&"popup__error_visible"),id:"password-input-error",children:k}),Object(a.jsx)("p",{className:"popup__input-label",children:"Username"}),Object(a.jsx)("input",{className:"popup__input",type:"text",name:"username",required:!0,minLength:"2",maxLength:"12",pattern:"[\\w\\d\\S]{1,12}",value:h,onChange:function(t){m((function(){return t.target.value.replace(" ","_")})),e.fieldValidator(t.target,S)},placeholder:"Enter your username"}),Object(a.jsx)("span",{className:"popup__input-error ".concat(""!==A&&"popup__error_visible"),id:"username-input-error",children:A}),Object(a.jsx)("button",{className:"popup__submit ".concat((e.loading||V)&&"popup__submit_disabled"),disabled:e.loading||V,type:"submit",children:e.isLoading?"Loading...":"Sign up"}),Object(a.jsxs)("p",{className:"popup__link-text",children:["or ",Object(a.jsx)("button",{className:"popup__link",type:"button",onClick:e.onOpen,children:"Sign in"})]})]})}),J=Object(a.jsx)("div",{className:"popup__container popup_success",children:Object(a.jsxs)("form",{className:"popup__form",children:[Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose}),Object(a.jsx)("h4",{className:"popup__title",children:"Registration successfully completed!"}),Object(a.jsx)("p",{className:"popup__link-text popup_success",children:Object(a.jsx)("button",{className:"popup__link",type:"button",onClick:e.onOpen,children:"Sign in"})})]})}),P=Object(a.jsx)("div",{className:"popup__container popup_success",children:Object(a.jsxs)("form",{className:"popup__form",children:[Object(a.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose}),Object(a.jsx)("h4",{className:"popup__title",children:"There was a problem with your request :("}),Object(a.jsx)("p",{className:"popup__link-text popup_success"})]})});return"signIn"===e.type?Object(a.jsx)("section",{className:"popup ".concat(e.isOpen&&"popup_state_opened"),children:D}):"signUp"===e.type?Object(a.jsx)("section",{className:"popup ".concat(e.isOpen&&"popup_state_opened"),children:Y}):"success"===e.type?Object(a.jsx)("section",{className:"popup ".concat(e.isOpen&&"popup_state_opened"),children:J}):"error"===e.type?Object(a.jsx)("section",{className:"popup ".concat(e.isOpen&&"popup_state_opened"),children:P}):Object(a.jsx)("section",{className:"popup ".concat(e.isOpen&&"popup_state_opened")})}var R=function(e){return Object(a.jsx)(d.b,{exact:e.exact,path:e.path,children:function(){return localStorage.getItem("token")?e.children:Object(a.jsx)(d.a,{to:"/"})}})};function E(){var e=c.a.useState(!1),t=Object(l.a)(e,2),n=t[0],s=t[1],o=c.a.useState(!1),i=Object(l.a)(o,2),r=i[0],u=i[1],p=c.a.useState(!1),h=Object(l.a)(p,2),f=h[0],_=h[1],x=c.a.useState(!1),S=Object(l.a)(x,2),v=S[0],C=S[1],E=c.a.useState(!1),V=Object(l.a)(E,2),H=V[0],T=V[1],B=c.a.useState(!1),U=Object(l.a)(B,2),F=U[0],D=U[1],Y=c.a.useState({}),J=Object(l.a)(Y,2),P=J[0],G=J[1],q=c.a.useState([]),M=Object(l.a)(q,2),z=M[0],X=M[1],W=c.a.useState([]),Q=Object(l.a)(W,2),K=Q[0],Z=Q[1],$=c.a.useState(!1),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=c.a.useState(!1),se=Object(l.a)(ae,2),ce=se[0],oe=se[1];function ie(){s(!1),u(!1),_(!1),C(!1),D(!1)}function re(){ie(),s(!0)}function le(e,t){oe(!0),m.login(e,t).then((function(e){e?(he(),ie()):(ue(),console.log("login failed"))})).catch((function(){ue(),console.log("login failed")})).finally((function(){oe(!1)}))}function de(){G({}),X([]),localStorage.clear(),T(!1)}function ue(){ie(),C(!0)}function pe(){D(!F)}function je(e){m.deleteCard(e._id).then((function(e){console.log("card deleted!"),me()})).catch((function(e){console.log(e)}))}function he(){if(localStorage.getItem("token")){var e=localStorage.getItem("token");m.setToken(e),oe(!0),m.authorize().then((function(e){T(!0),G(e),localStorage.setItem("user",P)})).catch((function(e){T(!1),ue(),console.log(e)})).finally((function(){oe(!1)}))}}function me(){if(localStorage.getItem("token")){var e=localStorage.getItem("token");m.setToken(e),m.getCards().then((function(e){X(e),localStorage.setItem("cards",z)})).catch((function(e){console.log(e)}))}console.log(z)}return c.a.useEffect((function(){localStorage.getItem("token")&&(localStorage.getItem("cards")&&(X(localStorage.getItem("cards")),me()),localStorage.getItem("user")&&G(localStorage.getItem("user")),he())}),[]),c.a.useEffect((function(){me()}),[P]),Object(a.jsx)(O.Provider,{value:P,children:Object(a.jsxs)(A.Provider,{value:z,children:[Object(a.jsx)(L,{isOpen:n,onOpen:function(){ie(),u(!0)},onClose:ie,onSignIn:le,fieldValidator:j.fieldValidator,formValidator:j.formValidator,type:"signIn",isLoading:ce}),Object(a.jsx)(L,{isOpen:r,onOpen:re,onClose:ie,onSignUp:function(e,t,n){oe(!0),m.register(e,t,n).then((function(e){e?(ie(),_(!0),le(t,n),console.log(e)):(ue(),console.log("registration failed"))})).catch((function(){ue(),console.log("registration failed")})).finally((function(){oe(!1)}))},fieldValidator:j.fieldValidator,formValidator:j.formValidator,type:"signUp",isLoading:ce}),Object(a.jsx)(L,{isOpen:f,onOpen:re,onClose:ie,type:"success"}),Object(a.jsx)(L,{isOpen:v,onClose:ie,type:"error"}),Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{exact:!0,path:"/",children:Object(a.jsxs)("div",{className:"App__main-bg",children:[Object(a.jsx)(g,{onSignin:le,onOpen:re,onSignOut:de,signedIn:H,onOpenNav:pe,currentUser:P,loading:ce}),Object(a.jsx)(I,{signedIn:H,onOpen:re,isOpen:F,onOpenNav:pe,onSignIn:le}),Object(a.jsx)(N,{isSignedIn:H,onSearch:function(e){ne(!0),b.getResults(e).then((function(t){Z([]);var n=function(e,t){var n="https://images.unsplash.com/photo-1585829365295-ab7cd400c167";return e.map((function(e){return{keyword:t,image:e.urlToImage?e.urlToImage:n,link:e.url,date:e.publishedAt,title:e.title,text:e.description,source:e.source.name}}))}(t.articles,e);Z(n)})).catch((function(e){console.log(e)})).finally((function(){ne(!1)}))},onSaveCard:function(e){z.some((function(t){return t.link===e.link}))?je(z.find((function(t){return t.link===e.link}))):m.addCard(e).then((function(e){console.log("card added!"),me()})).catch((function(e){console.log(e)}))},onOpenSignin:re,searchCards:K,fieldValidator:j.fieldValidator,formValidator:j.formValidator,loading:te})]})}),Object(a.jsx)(R,{exact:!0,path:"/saved-news",children:Object(a.jsxs)("div",{className:"App__saved-news",children:[Object(a.jsx)(g,{onSignin:le,onOpen:re,onSignOut:de,signedIn:H,onOpenNav:pe,currentUser:P,loading:ce}),Object(a.jsx)(I,{signedIn:H,onOpen:re,isOpen:F,onOpenNav:pe,onSignIn:le}),Object(a.jsx)(k,{isSignedIn:H,onDeleteCard:je})]})})]}),Object(a.jsx)(w,{}),Object(a.jsx)(y,{})]})]})})}n(31);i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(r.a,{basename:"/",children:Object(a.jsx)(E,{})})}),document.getElementById("root"))},9:function(e,t){t.baseURL="https://news-explorer-server.herokuapp.com/api",t.APIkey="de0e72f1af3b4dbfbdd6bc7e55939745",t.proxyURL="https://nomoreparties.co/news/v2/everything?apiKey="}},[[32,1,2]]]);
//# sourceMappingURL=main.ca17bff7.chunk.js.map